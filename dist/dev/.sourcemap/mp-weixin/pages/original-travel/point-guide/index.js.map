{"version":3,"sources":["webpack:///./src/components/SvgIcon.vue?b092","webpack:///./src/components/SvgIcon.vue?185e","uni-app:///src/components/SvgIcon.vue","webpack:///./src/components/SvgIcon.vue?388a","webpack:///./src/components/SvgIcon.vue?83eb","webpack:///./src/components/SvgIcon.vue?6f5c","webpack:///./src/components/SvgIcon.vue?df5a","uni-app:///src/main.js","webpack:///./src/pages/original-travel/point-guide/index.vue?399b","webpack:///./src/pages/original-travel/point-guide/index.vue?50e2","webpack:///./src/pages/original-travel/point-guide/index.vue?4950","webpack:///./src/pages/original-travel/point-guide/index.vue?51f1","uni-app:///src/pages/original-travel/point-guide/index.vue","webpack:///./src/pages/original-travel/point-guide/index.vue?4fcd","webpack:///./src/pages/original-travel/point-guide/index.vue?6589","webpack:///./src/pages/original-travel/point-guide/index.vue?b217","webpack:///./src/pages/original-travel/point-guide/index.vue?46db"],"names":["createPage","Page"],"mappings":"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","file":"pages/original-travel/point-guide/index.js","sourcesContent":["var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./SvgIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./SvgIcon.vue?vue&type=script&lang=js&\"","<template>\n  <svg class=\"svg-icon\"\n       :style=\"{fontSize: fontSize + 'px', color: color}\"\n       aria-hidden=\"true\">\n    <use :xlink:href=\"iconName\"></use>\n  </svg>\n</template>\n\n<script>\nexport default {\n  name: 'icon-svg',\n  props: {\n    icon: {\n      type: String,\n      required: true\n    },\n    fontSize: {\n      type: String\n    },\n    color: {\n      type: String\n    }\n  },\n  computed: {\n    iconName () {\n      return `#${this.icon}`\n    }\n  }\n}\n</script>\n\n<style>\n.svg-icon {\n  width: 1em;\n  height: 1em;\n  vertical-align: -0.15em;\n  fill: currentColor;\n  overflow: hidden;\n}\n</style>\n","import { render, staticRenderFns, recyclableRender, components } from \"./SvgIcon.vue?vue&type=template&id=1e38a21c&\"\nvar renderjs\nimport script from \"./SvgIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./SvgIcon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SvgIcon.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/SvgIcon.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./SvgIcon.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./SvgIcon.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1631173795901\n      var cssReload = require(\"/Users/ccwork/Documents/Project__slzx/business_external/tianmu-league/h5/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","export * from \"-!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./SvgIcon.vue?vue&type=template&id=1e38a21c&\"","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/original-travel/point-guide/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=e2605b40&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=e2605b40&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e2605b40\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/original-travel/point-guide/index.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=e2605b40&scoped=true&\"","var components\ntry {\n  components = {\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uActionSheet: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-action-sheet/u-action-sheet\" */ \"uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class='point-guide-wrap relative '>\n    <div id=\"map\"></div>\n    <PoiKeywords class=\"poi-keywords\"\n                 @changePois=\"changePois\"></PoiKeywords>\n    <DragPopover showLocation=\"true\"\n                 max-top=\"79.3\"\n                 @onLocation=\"onLocation\">\n      <!-- 生活馆 搜索框 -->\n      <div v-if=\"currentPoi.type === '01'\"\n           class=\"search-wrap\">\n        <div class=\"search center-align color-999 ft26\">\n          <SvgIcon icon=\"icon_hanhan-01-01\"\n                   class=\"mr16\"></SvgIcon>\n          <u-input v-model=\"keyword\"\n                   @input=\"poiSearch\"\n                   placeholder=\"搜索地点\"\n                   type=\"text\" />\n        </div>\n      </div>\n      <div class=\"content-box\">\n        <PointGuideItem v-for=\"(item, index) in pois\"\n                        @onGuide=\"showGuideActionSheet\"\n                        @onPoi=\"onPoi\"\n                        :key=\"index\"\n                        :info=\"{item, index}\"\n                        :main=\"index === currentIndex\"></PointGuideItem>\n      </div>\n    </DragPopover>\n    <u-action-sheet :list=\"actions\"\n                    @click=\"onSelectGuide\"\n                    v-model=\"showGuide\"></u-action-sheet>\n  </div>\n</template>\n\n<script>\nimport mapMixin from '@/mixins/map.js'\nimport PoiKeywords from './components/PoiKeywords'\nimport AMap from 'AMap'\nimport DragPopover from '@/components/DragPopover'\nimport { subStringWithStrlen } from '@/utils/tools.js'\nimport Vue from 'vue/dist/vue.esm.js'\nimport SvgIcon from '@/components/SvgIcon'\n\nimport PointGuideItem from './components/PointGuideItem'\nimport { getAMapLngLat, getLngLat, beginGuide } from '@/utils/map.js'\n\n// 地图中心点上下纬度偏移量\nconst centerLngOffset = 0.04\n// 主要地标点\nlet scenicSpot = null\n\nconst LWH = { w: 38, h: 47 }\nconst MWH = { w: 25, h: 31 }\n\nexport default {\n  name: 'index',\n  methods: {\n    // 点击重新定位按钮\n    onLocation () {\n      this.$amap.clearMap()\n      let _pois = JSON.parse(JSON.stringify(this.pois))\n      _pois.forEach(poi => {\n        this.drawMarkder({ ...MWH }, poi)\n      })\n      this.setMapCenter(scenicSpot)\n      this.drawMarkder({ ...LWH }, scenicSpot)\n    },\n    // 显示导航选择框\n    showGuideActionSheet (item) {\n      this.showGuide = true\n      this.guidePoint = item\n    },\n    // 选择地图导航回调\n    onSelectGuide (act, index) {\n      beginGuide(act, this.guidePoint)\n    },\n    // 选择切换 poi 点\n    onPoi (info) {\n      if (this.currentIndex === info.index) return\n      this.currentIndex = info.index\n      this.resetDrawMarkders(info.item)\n    },\n    // 兴趣点名字\n    changePois (poi) {\n      this.keyword = ''\n      this.currentPoi = poi\n      this.currentIndex = 0\n      this.pois = [{ address: scenicSpot.regionsName, ...scenicSpot }]\n\n      this.$amap.clearMap()\n      this.setMapCenter(scenicSpot)\n      this.drawMarkder({ ...LWH }, scenicSpot)\n\n      if (poi.type) return this.getJourneyPointListByRegionsCode(poi.type)\n\n      this.getPoisWithLngLat(poi.name)\n    },\n    // 生活馆 搜索地点\n    poiSearch () {\n      const type = '01'\n      this.getJourneyPointListByRegionsCode(type)\n    },\n    getJourneyPointListByRegionsCode (type) {\n      const params = {\n        keyword: this.keyword,\n        type,\n      }\n      this.$api.getJourneyPointListByRegionsCode(params).then(res => {\n        if (res.isError) return\n        const _pois = res.content.map(item => {\n          item.address = item.regionsName\n          return item\n        })\n        this.pois = [{ address: scenicSpot.regionsName, ...scenicSpot }].concat(_pois)\n        _pois.forEach(poi => {\n          this.drawMarkder({ ...MWH }, poi)\n        })\n      })\n    },\n    // 根据选择点，搜索 poi 点\n    getPoisWithLngLat () {\n      const that = this\n      AMap.plugin('AMap.PlaceSearch', function () {\n        var autoOptions = {\n          city: '杭州市',\n          pageSize: 50,\n          citylimit: true, // 是否强制限制在设置的城市内搜索\n          autoFitView: true // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围\n        }\n        var placeSearch = new AMap.PlaceSearch(autoOptions)\n        placeSearch.searchNearBy(that.currentPoi.name, getAMapLngLat(scenicSpot), 5000, function (status, result) {\n          if (!result || !result.poiList) return\n          const _pois = result.poiList.pois\n          that.pois = [{ address: scenicSpot.regionsName, ...scenicSpot }].concat(_pois)\n          _pois.forEach(poi => {\n            that.drawMarkder({ ...MWH }, poi, that.currentPoi.marker)\n          })\n        })\n      })\n    },\n    // 点击显示信息框\n    markerClick (e) {\n      const _point = e.target.getExtData()\n      this.pois.forEach((item, index) => {\n        if (item.name === _point.name) this.currentIndex = index\n      })\n      this.resetDrawMarkders(_point)\n      this.showInfoWindow(e)\n    },\n    // 信息窗体\n    showInfoWindow (e) {\n      const marker = e.target\n      const _point = marker.getExtData()\n\n      const windowPosition = { ...marker.getPosition() }\n      const windowOffset = { ...marker.getOffset() }\n\n      windowOffset.y -= 20 // 在 marker 基础上获取偏移量上调\n      windowOffset.x = _point.address ? 3 : 5 // 根据是否有地址，判断是系统的 poi，还是地图搜索出来的，图标大小不同\n\n      const title = subStringWithStrlen(_point.name, 18)\n      const address = _point.address ? subStringWithStrlen(_point.address, 18) : _point.typeName\n\n      var _this = this\n      var MyComponent = Vue.extend({\n        template: \"<div class='map-info-wrap'>\" +\n          '<div>' +\n          `<div class='title'>${title}</div>` +\n          `<div class='address'>${address || ''}</div>` +\n          '</div>' +\n          '<div class=\"guide-btn center\" v-on:click=\"onOpenGuide\">' +\n          '<SvgIcon icon=\"icon_daohang\" style=\"color:#518CFC \"class=\"ft20 mr8\"></SvgIcon>' +\n          '<span>到这里去</span></div>' +\n          '</div>',\n        components: { SvgIcon },\n        methods: {\n          onOpenGuide () {\n            _this.showGuideActionSheet(_point)\n          }\n        }\n      })\n      // 将新创建的子组件进行挂载\n      var component = new MyComponent().$mount()\n      // 将窗体内容添加到infoWindow中\n      var infoWindow = new AMap.InfoWindow({\n        isCustom: true, // 使用自定义窗体\n        content: component.$el, // 传入 dom 对象，或者 html 字符串\n        offset: windowOffset,\n        autoMove: false\n      })\n      // 打开窗体\n      infoWindow.open(this.$amap, windowPosition)\n    },\n\n    // 绘制 marker\n    drawMarkder ({ w, h }, _spot, markerImg) {\n      let markerImgUse = this.currentPoi.marker\n      if (_spot.isTop) {\n        markerImgUse = 'guide_mark_red.png'\n      }\n      if (markerImg) {\n        markerImgUse = markerImg\n      }\n      const marker = new AMap.Marker({\n        position: getAMapLngLat(_spot),\n        map: this.$amap,\n        // animation: 'AMAP_ANIMATION_DROP',\n        offset: new AMap.Pixel(-w / 2, -h),\n        icon: this.getMarkderIcon(w, h, markerImgUse),\n        touchZoom: false\n      })\n\n      marker.setExtData(_spot)\n      // 点击方法绑定\n      marker.on('click', this.markerClick)\n\n      return marker\n    },\n\n    // 绘制坐标 icon\n    getMarkderIcon (w, h, markerImg = \"guide_mark_red.png\") {\n      return new AMap.Icon({\n        size: new AMap.Size(w, h),\n        image: require(`@/static/map/${markerImg}`),\n        imageSize: new AMap.Size(w, h)\n      })\n    },\n\n    // 绘制地图中心点\n    setMapCenter (_point) {\n      const { lng, lat } = getLngLat(_point)\n      const _lngLat = new AMap.LngLat(lng, lat - centerLngOffset)\n      this.$amap.setCenter(_lngLat)\n    },\n\n    // 重新绘制主要点和其它点位\n    resetDrawMarkders (_poi) {\n      this.$amap.clearMap()\n\n      let _pois = JSON.parse(JSON.stringify(this.pois))\n      _pois = _pois.filter((item, index) => index !== this.currentIndex)\n      _pois.forEach(poi => {\n        this.drawMarkder({ ...MWH }, poi)\n      })\n      this.setMapCenter(_poi)\n      this.drawMarkder({ ...LWH }, _poi)\n    }\n  },\n  mounted () {\n    scenicSpot = { ...JSON.parse(sessionStorage.getItem('pointData')), isTop: true }\n    this.pois = [{ address: scenicSpot.regionsName, ...scenicSpot }]\n    this.drawMarkder({ ...LWH }, scenicSpot)\n    this.setMapCenter(scenicSpot)\n    this.changePois({\n      marker: 'guide_mark_2.png',\n      name: '风景'\n    })\n  },\n  components: { PoiKeywords, DragPopover, PointGuideItem },\n  data () {\n    this.currentPoi = {}\n    return {\n      currentIndex: 1,\n      showGuide: false,\n      keyword: '',\n      guidePoint: {},\n      actions: Object.freeze([{ text: '高德地图' }, { text: '腾讯地图' }]),\n      pois: [],\n      mapInitObj: Object.freeze({\n        resizeEnable: true,\n        zoom: 12,\n        zooms: [9, 19],\n      })\n    }\n  },\n  mixins: [mapMixin]\n}\n</script>\n<style>\npage {\n  height: 100%;\n}\n</style>\n<style lang='scss' scoped>\n.point-guide-wrap {\n  height: 100%;\n  #map {\n    width: 100vw;\n    height: 93vh;\n  }\n\n  .poi-keywords {\n    position: absolute;\n    z-index: 98;\n    left: 12px;\n    top: 12px;\n  }\n  .content-box {\n    height: 100%;\n    overflow: scroll;\n  }\n  .search-wrap {\n    padding: 0rpx 30rpx 2rpx;\n    .search {\n      height: 66rpx;\n      padding: 0 20rpx;\n      border-radius: 33rpx;\n      background: #f4f5f7;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1631173795900\n      var cssReload = require(\"/Users/ccwork/Documents/Project__slzx/business_external/tianmu-league/h5/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=e2605b40&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=e2605b40&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1631173796363\n      var cssReload = require(\"/Users/ccwork/Documents/Project__slzx/business_external/tianmu-league/h5/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}