{"version":3,"sources":["uni-app:///external \"AMap\"","uni-app:///src/main.js","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?2c68","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?685e","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?d3e8","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?6b21","uni-app:///src/pages/original-travel/stroke-order/VenueMap.vue","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?6f5a","webpack:///./src/pages/original-travel/stroke-order/VenueMap.vue?e152"],"names":["createPage","Page"],"mappings":"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","file":"pages/original-travel/stroke-order/VenueMap.js","sourcesContent":["module.exports = AMap;","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/original-travel/stroke-order/VenueMap.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./VenueMap.vue?vue&type=template&id=1b292a01&scoped=true&\"\nvar renderjs\nimport script from \"./VenueMap.vue?vue&type=script&lang=js&\"\nexport * from \"./VenueMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VenueMap.vue?vue&type=style&index=0&id=1b292a01&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b292a01\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/original-travel/stroke-order/VenueMap.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VenueMap.vue?vue&type=template&id=1b292a01&scoped=true&\"","var components\ntry {\n  components = {\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VenueMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VenueMap.vue?vue&type=script&lang=js&\"","\r\n<template>\r\n  <div class='venue-map-wrap'>\r\n    <div id=\"map\"></div>\r\n    <DragPopover max-top=\"70\"\r\n                 showLocation=\"true\"\r\n                 @onLocation=\"onLocation\">\r\n      <div class=\"box relative column\">\r\n        <!-- 搜索框 -->\r\n        <div class=\"search-wrap\">\r\n          <div class=\"search center-align color-999 ft26\">\r\n            <SvgIcon icon=\"icon_hanhan-01-01\"\r\n                     class=\"mr16\"></SvgIcon>\r\n            <u-input v-model=\"poi.keyword\"\r\n                     @input=\"poiSearch\"\r\n                     placeholder=\"搜索地点\"\r\n                     type=\"text\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"list flex1\"\r\n             ref=\"list\">\r\n          <LocationItem v-for=\"(item, index) in poi.list\"\r\n                        :item=\"item\"\r\n                        @onSelectItem=\"onSelectLocation\"\r\n                        :isCurrent=\"selectPoi.id === item.id\"\r\n                        :key=\"index\"></LocationItem>\r\n        </div>\r\n        <div style=\"height: 120rpx;\"></div>\r\n      </div>\r\n      <div class=\"btn-wrap bt center\">\r\n        <div class=\"btn center bold\"\r\n             @click=\"onConfirmBtn\">确定</div>\r\n      </div>\r\n    </DragPopover>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport LocationItem from '@/pages/original-travel/stroke-order/components/LocationItem'\r\nimport AMap from 'AMap'\r\n\r\nconst MARKER_W_H = { W: 30, H: 50 }\r\n\r\nexport default {\r\n  name: 'VenueMap',\r\n  methods: {\r\n    onConfirmBtn () {\r\n      uni.navigateBack({ delta: 1 })\r\n      const { address } = this.selectPoi\r\n      const { lat, lng } = this.selectPoi.location\r\n      uni.$emit('setMeetingPlaceEvent', {\r\n        meetingPlace: address,\r\n        meetingPlaceLat: lat,\r\n        meetingPlaceLng: lng\r\n      })\r\n    },\r\n    poiSearch () {\r\n      this.getPoisBySearch()\r\n    },\r\n    onSelectLocation (e) {\r\n      this.selectPoi = e\r\n      this.$amap.setCenter(e.location)\r\n      this.$marker.setPosition(e.location)\r\n    },\r\n    // 地图绘制\r\n    drawMap () {\r\n      const that = this\r\n\r\n      uni.getLocation({\r\n        type: 'gcj02',\r\n        success: ({ longitude, latitude }) => {\r\n          AMap.plugin('AMap.PlaceSearch', function () {\r\n            var autoOptions = {\r\n              city: '杭州市',\r\n              pageSize: 50\r\n            }\r\n            var placeSearch = new AMap.PlaceSearch(autoOptions)\r\n            placeSearch.searchNearBy('', [longitude, latitude], 5000, function (status, result) {\r\n              if (!result || !result.poiList) return\r\n              const _pois = result.poiList.pois\r\n\r\n              that.poi.list = _pois\r\n              that.selectPoi = _pois[0]\r\n              that.locationResult = _pois[0]\r\n\r\n              that.drawLocation()\r\n\r\n              that.$amap.setCenter(_pois[0].location)\r\n              that.$marker = that.drawLocationMarker()\r\n\r\n              that.onEvent()\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 地图事件监听\r\n    onEvent () {\r\n      this.$amap.on('dragging', this.mapDragging)\r\n      this.$amap.on('moveend', this.mapMoveend)\r\n    },\r\n    // 绘制进来定位点 marker\r\n    drawLocationMarker () {\r\n      const marker = new AMap.Marker({\r\n        position: this.$amap.getCenter(),\r\n        map: this.$amap,\r\n        offset: new AMap.Pixel(-MARKER_W_H.W / 2, -MARKER_W_H.H),\r\n        icon: this.getMarkderIcon('drag_location')\r\n      })\r\n\r\n      return marker\r\n    },\r\n    drawLocation () {\r\n      const { position, location } = this.locationResult\r\n      new AMap.Marker({\r\n        position: position || location,\r\n        map: this.$amap,\r\n        offset: new AMap.Pixel(-30 / 2, -30 / 2),\r\n        icon: new AMap.Icon({\r\n          size: new AMap.Size(30, 30),\r\n          image: require('@/static/map/location.png'),\r\n          imageSize: new AMap.Size(30, 30)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 根据选择点，搜索 poi 点\r\n    getPoisBySearch () {\r\n      const that = this\r\n      AMap.plugin('AMap.Autocomplete', function () {\r\n        var autoOptions = {\r\n          city: '杭州市',\r\n        }\r\n        var placeSearch = new AMap.Autocomplete(autoOptions)\r\n        placeSearch.search(that.poi.keyword, function (status, result) {\r\n          if (result.info === 'OK') {\r\n            that.poi.list = result.tips\r\n            that.selectPoi = result.tips[0]\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    // 地图拖动，定位点更换定位位置\r\n    mapDragging (e) {\r\n      const _lnglat = this.$amap.getCenter()\r\n      this.$marker.setPosition(_lnglat)\r\n    },\r\n    // 地图拖动完成，重新绘制定位点\r\n    mapMoveend (e) {\r\n      const _position = this.$amap.getCenter()\r\n      this.$marker.setPosition(_position)\r\n    },\r\n    // 根据选择点，搜索 poi 点\r\n    getPoisByMoveend () {\r\n      const that = this\r\n      const lnglat = this.$amap.getCenter()\r\n      AMap.plugin('AMap.PlaceSearch', function () {\r\n        var autoOptions = {\r\n          pageSize: 50,\r\n        }\r\n        var placeSearch = new AMap.PlaceSearch(autoOptions)\r\n        placeSearch.searchNearBy('', lnglat, 5000, function (status, result) {\r\n          if (!result || !result.poiList) return\r\n          const _pois = result.poiList.pois\r\n          that.poi.list = _pois\r\n          that.selectPoi = _pois[0]\r\n          that.$refs.list.scrollTop = 0\r\n        })\r\n      })\r\n    },\r\n    onLocation () {\r\n      this.poi.keyword = ''\r\n      this.drawMap()\r\n    },\r\n    // 绘制坐标 icon\r\n    getMarkderIcon (img) {\r\n      return new AMap.Icon({\r\n        size: new AMap.Size(MARKER_W_H.W, MARKER_W_H.H),\r\n        image: require(`@/static/map/${img}.png`),\r\n        imageSize: new AMap.Size(MARKER_W_H.W, MARKER_W_H.H)\r\n      })\r\n    },\r\n  },\r\n  components: { LocationItem },\r\n  data () {\r\n    return {\r\n      $amap: null,\r\n      $marker: null,\r\n      poi: {\r\n        keyword: '',\r\n        list: []\r\n      },\r\n      selectPoi: {}\r\n    }\r\n  },\r\n  mounted () {\r\n    const mapInitObj = Object.freeze({\r\n      resizeEnable: true,\r\n      zoom: 17,\r\n      zooms: [9, 19],\r\n    })\r\n    this.$amap = new AMap.Map('map', mapInitObj)\r\n    this.drawMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.venue-map-wrap {\r\n  height: 100%;\r\n  overflow: hidden;\r\n  #map {\r\n    width: 100vw;\r\n    height: 70vh;\r\n  }\r\n\r\n  .box {\r\n    height: 100%;\r\n    position: relative;\r\n    .search-wrap {\r\n      padding: 0rpx 30rpx 2rpx;\r\n      .search {\r\n        height: 66rpx;\r\n        padding: 0 20rpx;\r\n        border-radius: 33rpx;\r\n        background: #f4f5f7;\r\n      }\r\n    }\r\n    .list {\r\n      height: 100%;\r\n      overflow: scroll;\r\n    }\r\n  }\r\n  .btn-wrap {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    height: 120rpx;\r\n    .btn {\r\n      font-size: 32rpx;\r\n      background: #e32417;\r\n      height: 88rpx;\r\n      width: 690rpx;\r\n      border-radius: 49px;\r\n      color: #ffffff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VenueMap.vue?vue&type=style&index=0&id=1b292a01&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VenueMap.vue?vue&type=style&index=0&id=1b292a01&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1625538127827\n      var cssReload = require(\"D:/word/project/business-projects/external/tianmu-league/h5/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}