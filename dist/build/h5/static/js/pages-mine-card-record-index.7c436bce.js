(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-card-record-index"],{"0394":function(t,a,i){"use strict";i.r(a);var e=i("f9d4"),n=i("883f");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(r);i("456c");var o,c=i("f0c5"),d=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"6ea8a552",null,!1,e["a"],o);a["default"]=d.exports},"0416":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("a9e3");var e={name:"u-loading",props:{mode:{type:String,default:"circle"},color:{type:String,default:"#c7c7c7"},size:{type:[String,Number],default:"34"},show:{type:Boolean,default:!0}},computed:{cricleStyle:function(){var t={};return t.width=this.size+"rpx",t.height=this.size+"rpx","circle"==this.mode&&(t.borderColor="#e4e4e4 #e4e4e4 #e4e4e4 ".concat(this.color?this.color:"#c7c7c7")),t}}};a.default=e},"1bfa":function(t,a,i){"use strict";i.r(a);var e=i("bf40"),n=i("6ef1");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(r);i("8ae2");var o,c=i("f0c5"),d=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"636b7930",null,!1,e["a"],o);a["default"]=d.exports},2909:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=d;var e=c(i("6005")),n=c(i("db90")),r=c(i("06c5")),o=c(i("3427"));function c(t){return t&&t.__esModule?t:{default:t}}function d(t){return(0,e.default)(t)||(0,n.default)(t)||(0,r.default)(t)||(0,o.default)()}},3427:function(t,a,i){"use strict";function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(a,"__esModule",{value:!0}),a.default=e},"456c":function(t,a,i){"use strict";var e=i("d225"),n=i.n(e);n.a},"5a46":function(t,a,i){var e=i("4bad");a=e(!1),a.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 边框颜色 */.color-primary[data-v-6ea8a552]{color:#3049c0}.color-333[data-v-6ea8a552]{color:#333}.color-666[data-v-6ea8a552]{color:#666}.color-999[data-v-6ea8a552]{color:#999}.bg-color[data-v-6ea8a552]{background-color:#f7f7f7}.bg-white[data-v-6ea8a552]{background-color:#fff}.white-color[data-v-6ea8a552]{color:#fff}.primary-color[data-v-6ea8a552]{color:#f54400}.success-color[data-v-6ea8a552]{color:#0e130f}.warning-color[data-v-6ea8a552]{color:#f0ad4e}.error-color[data-v-6ea8a552]{color:#dd524d}.primary-text[data-v-6ea8a552]{color:#333}.secondary-text[data-v-6ea8a552]{color:#666}.tip-text[data-v-6ea8a552]{color:#999}.color-e32417[data-v-6ea8a552]{color:#e32417}.card-record-wrap[data-v-6ea8a552]{color:#333}.card-record-wrap .head[data-v-6ea8a552]{width:100%;height:%?162?%;background-image:-webkit-linear-gradient(left,#ffdb5d 21%,#ffca00 96%);background-image:linear-gradient(90deg,#ffdb5d 21%,#ffca00 96%);-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.card-record-wrap .list[data-v-6ea8a552]{height:100%}.card-record-wrap .list .item[data-v-6ea8a552]{background:#fff;box-shadow:%?3?% %?2?% %?12?% %?8?% rgba(17,17,17,.03);border-radius:%?6?%}.card-record-wrap .list .item .num[data-v-6ea8a552]{width:%?48?%;height:%?48?%;line-height:%?48?%;border-radius:%?26?%;border:solid 1px #e1b406;color:#e1b406}.card-record-wrap .list .item .card-btn[data-v-6ea8a552]{min-width:%?160?%;height:100%;padding:0 %?8?%;border-left:solid 1px #eaeaea}.card-record-wrap .list .item .color-E32417[data-v-6ea8a552]{color:#e32417}',""]),t.exports=a},"5f7a":function(t,a,i){var e=i("e96f");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("38adad2d",e,!0,{sourceMap:!1,shadowMode:!1})},6005:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var e=n(i("6b75"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t))return(0,e.default)(t)}},"67a5":function(t,a,i){"use strict";var e=i("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("2909")),r=e(i("5530"));i("99af"),i("d81d");var o=e(i("024c")),c=null,d={methods:{onStrokeOrder:function(){uni.navigateTo({url:"/pages/original-travel/stroke-order/detail?id=".concat(this.journeyLineId)})},onPersonnelCard:function(t){if(!(this.signUpQuantity<=0)){var a=t.id;uni.navigateTo({url:"/pages/mine/card-record/personnelCard?id=".concat(this.journeyLineId,"&journeyPointId=").concat(a)})}},onCard:function(t){var a=this,i=t.id,e=t.distance;if(e>500)return this.$msg("不在打卡范围内");var n={id:this.journeyLineId,journeyPointId:i};this.$api.journeyItineraryPointSignIn(n).then((function(t){if(t.isError)return a.$msg(t.message);a.$msg("打卡成功"),a.getJourneyItinerarySignInById()}))},getJourneyItinerarySignInById:function(t){var a=this,i={id:t};this.$api.getJourneyItinerarySignInById(i).then((function(t){if(t.isError)return a.$msg(t.message);var i=t.content,e=i.journeyItineraryName,n=i.signUpQuantity,r=i.pointSignInList;a.journeyItineraryName=e,a.signUpQuantity=n,a.pointSignInList=r||[]}))},initMyPoint:function(){var t=this;o.default.plugin("AMap.Geolocation",(function(){var a=new o.default.Geolocation({enableHighAccuracy:!0,timeout:1e4});a.getCurrentPosition((function(a,i){if("complete"==a){var e=i.position,n=e.lng,r=e.lat;t.myPoint=[n,r]}}))}))},setPointDistance:function(){var t=this,a=this.pointSignInList.map((function(a){var i=a.lng,e=a.lat,n=new o.default.LngLat(i,e,!0),c=Math.round(n.distance(t.myPoint))+"";return(0,r.default)((0,r.default)({},a),{},{distance:c})}));this.pointSignInList=(0,n.default)(a)}},data:function(){return{journeyItineraryName:"",signUpQuantity:0,pointSignInList:[],myPoint:null}},computed:{cardBtnIcon:function(){return function(t){var a=t.isSignIn,i=t.distance,e="icon_dakaline",n="color-E32417";return a&&(e="icon_daka"),(!i||i>500)&&(n="color-999"),{icon:e,className:n}}},cardBtnText:function(){return function(t){var a=t.isSignIn,i=t.distance,e="color-333",n="打卡";return a&&(n="已打卡",e="color-E32417"),(!i||i>500)&&(e="color-999"),{className:e,text:n}}},distanceText:function(){return function(t){var a=t.distance;return a>1e7?"还很远":a>1e3?Math.round(a/1e3)+"km":a+"m"}}},watch:{myPoint:{deep:!0,handler:function(){this.setPointDistance()}}},destroyed:function(){c&&clearTimeout(c)},onLoad:function(t){this.initMyPoint(),this.journeyLineId=t.id,this.getJourneyItinerarySignInById(this.journeyLineId)}};a.default=d},"6ef1":function(t,a,i){"use strict";i.r(a);var e=i("0416"),n=i.n(e);for(var r in e)["default"].indexOf(r)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(r);a["default"]=n.a},"883f":function(t,a,i){"use strict";i.r(a);var e=i("67a5"),n=i.n(e);for(var r in e)["default"].indexOf(r)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(r);a["default"]=n.a},"8ae2":function(t,a,i){"use strict";var e=i("5f7a"),n=i.n(e);n.a},bf40:function(t,a,i){"use strict";var e;i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return r})),i.d(a,"a",(function(){return e}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.show?i("v-uni-view",{staticClass:"u-loading",class:"circle"==t.mode?"u-loading-circle":"u-loading-flower",style:[t.cricleStyle]}):t._e()},r=[]},d225:function(t,a,i){var e=i("5a46");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("83acfb70",e,!0,{sourceMap:!1,shadowMode:!1})},db90:function(t,a,i){"use strict";function e(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=e,i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630")},e96f:function(t,a,i){var e=i("4bad");a=e(!1),a.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 边框颜色 */.color-primary[data-v-636b7930]{color:#3049c0}.color-333[data-v-636b7930]{color:#333}.color-666[data-v-636b7930]{color:#666}.color-999[data-v-636b7930]{color:#999}.bg-color[data-v-636b7930]{background-color:#f7f7f7}.bg-white[data-v-636b7930]{background-color:#fff}.white-color[data-v-636b7930]{color:#fff}.primary-color[data-v-636b7930]{color:#f54400}.success-color[data-v-636b7930]{color:#0e130f}.warning-color[data-v-636b7930]{color:#f0ad4e}.error-color[data-v-636b7930]{color:#dd524d}.primary-text[data-v-636b7930]{color:#333}.secondary-text[data-v-636b7930]{color:#666}.tip-text[data-v-636b7930]{color:#999}.color-e32417[data-v-636b7930]{color:#e32417}.u-loading-circle[data-v-636b7930]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;vertical-align:middle;width:%?28?%;height:%?28?%;background:0 0;border-radius:50%;border:2px solid;border-color:#e5e5e5 #e5e5e5 #e5e5e5 #8f8d8e;-webkit-animation:u-circle-data-v-636b7930 1s linear infinite;animation:u-circle-data-v-636b7930 1s linear infinite}.u-loading-flower[data-v-636b7930]{width:20px;height:20px;display:inline-block;vertical-align:middle;-webkit-animation:a 1s steps(12) infinite;animation:u-flower-data-v-636b7930 1s steps(12) infinite;background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat;background-size:100%}@-webkit-keyframes u-flower-data-v-636b7930{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes u-flower-data-v-636b7930{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes u-circle-data-v-636b7930{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""]),t.exports=a},f9d4:function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return r})),i.d(a,"a",(function(){return e}));var e={uLoading:i("1bfa").default},n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"card-record-wrap"},[i("div",{staticClass:"head column pl30 pr30",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onStrokeOrder.apply(void 0,arguments)}}},[i("div",{staticClass:"mb20 medium center-align"},[i("span",{staticClass:"ft32"},[t._v("对应行程："+t._s(t.journeyItineraryName))]),i("svg-icon",{staticClass:"ft20 ml8 bold",attrs:{icon:"icon_xiangyoujiantou"}})],1),i("div",{staticClass:"ft24",staticStyle:{opacity:"0.6"}},[t._v("行程参与人数："+t._s(t.signUpQuantity)+"人")])]),t.myPoint?i("v-uni-scroll-view",{attrs:{"scroll-y":!0}},[i("div",{staticClass:"list pb48"},t._l(t.pointSignInList,(function(a,e){return i("div",{key:e,staticClass:"item mt20 ml30 mr30 pt24 pl24 pb24 center-align"},[i("div",{staticClass:"flex flex1"},[i("div",{staticClass:"num tc ft24 mr20"},[t._v(t._s(e+1))]),i("div",{staticClass:"flex1"},[i("div",{staticClass:"ft32 bold mb14"},[t._v(t._s(a.name))]),i("div",{staticClass:"ft24 mb8"},[t._v(t._s(a.address))]),i("div",{staticClass:"center-align color-999",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPersonnelCard(a)}}},[i("span",{staticClass:"ft24"},[t._v(t._s(a.signInQuantity)+"人已打卡，"+t._s(t.signUpQuantity-a.signInQuantity)+"人未打卡")]),i("svg-icon",{staticClass:"ft24 ml8",attrs:{icon:"icon_xiangxia"}})],1)])]),i("div",{staticClass:"card-btn center column",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onCard(a)}}},[i("svg-icon",{class:t.cardBtnIcon(a).className,staticStyle:{"font-size":"48rpx"},attrs:{icon:t.cardBtnIcon(a).icon}}),i("div",{staticClass:"ft22 tc",class:t.cardBtnText(a).className},[t._v(t._s(t.cardBtnText(a).text))]),i("div",{staticClass:"ft20 color-999 tc"},[t._v("距你"+t._s(t.distanceText(a)||"--"))])],1)])})),0)]):i("div",{staticClass:"pt48"},[i("div",{staticClass:"center"},[i("u-loading",{attrs:{mode:"circle"}}),i("div",{staticClass:"ft28 color-999 ml16"},[t._v("正在获取位置信息...")])],1)])],1)},r=[]}}]);